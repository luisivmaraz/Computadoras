<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
    <title>Abarrotes Ti</title>
</head>
<body>
    <div data-role="page">
        <div data-role="header" data-position="fixed">
            <h1>Abarrotes TI</h1>
            <div data-role="navbar">
                <ul>
                    <li><a href="#" class="ui-btn-active">Inicio</a></li>
                    <li><a href="#">Productos</a></li>
                    <li><a href="#">Contacto</a></li>
                </ul>
            </div>
        </div>

        <div data-role="content">
            <form action="/api/products/" method="POST" data-ajax="false">
                <label for="txt_codigo_barras">Código de barras:</label>
                <input type="text" name="barcode" id="txt_codigo_barras" placeholder="Código de barras" value="">

                <label for="txt_description">Descripción:</label>
                <input type="text" name="description" id="txt_description" placeholder="Descripción" value="">

                <label for="txt_brand">Marca:</label>
                <input type="text" name="brand" id="txt_brand" placeholder="Marca" value="">

                <label for="txt_price">Precio:</label>
                <input type="text" name="price" id="txt_price" placeholder="Precio" value="">

                <label for="txt_cost">Costo:</label>
                <input type="text" name="cost" id="txt_cost" placeholder="Costo" value="">

                <label for="txt_stock">Stock:</label>
                <input type="text" name="stock" id="txt_stock" placeholder="Stock" value="">

                <label for="txt_expiredDate">Caducidad:</label>
                <input type="text" name="expiredDate" id="txt_expiredDate" placeholder="Caducidad" value="">

                <label for="flip-2">Activo:</label>
                <select name="status" id="flip-2" data-role="slider">
                    <option value="0">Activos</option>
                    <option value="1">Inactivo</option>
                </select>

                <button type="submit" class="ui-btn ui-btn-b ui-corner-all">Guardar</button>
            </form>

            <ul data-role="listview" data-inset="true">
                <% products.forEach((product) => { %>
                    <li>
                        <a href="#collapsible<%= product.barcode %>" data-rel="popup">
                            <h2><%= product.description %></h2>
                            <p>Código de barras: <%= product.barcode %></p>
                            <p>Marca: <%= product.brand %></p>
                            <p>Precio de venta: <%= product.price %></p>
                        </a>
                    </li>

                    <div data-role="popup" id="collapsible<%= product.barcode %>" data-overlay-theme="a" data-theme="a" data-dismissible="false" style="max-width:400px;">
                        <div data-role="header" data-theme="a">
                            <h1>Detalles</h1>
                        </div>
                        <div data-role="content" data-theme="a">
                            <h3><%= product.description %></h3>
                            <p>Código de barras: <%= product.barcode %></p>
                            <p>Marca: <%= product.brand %></p>
                            <p>Precio de venta: <%= product.price %></p>
                            <p>Precio de compra: <%= product.cost %></p>
                            <p>Existencias: <%= product.stock %></p>
                            <p>Caducidad: <%= product.expiredDate %></p>
                            <p>Estatus: <%= product.status %></p>
                            <a href="/api/products/<%= product.barcode %>" class="ui-btn">Editar</a>
                            <a href="/api/products/delete/<%= product.barcode %>" class="ui-btn">Eliminar</a>
                        </div>
                    </div>
                <% }) %>
            </ul>
        </div>

        <div data-role="footer" data-position="fixed">
            <h5>Luisivmaraz 03</h5>
        </div>
    </div>
</body>
</html>
